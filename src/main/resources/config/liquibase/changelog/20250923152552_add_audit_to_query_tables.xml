<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd">

    <changeSet id="create-query_group_aud" author="gwen">
        <createTable tableName="query_group_aud">
            <column name="id" type="BIGINT"/>
            <column name="rev" type="INTEGER"/>
            <column name="revtype" type="SMALLINT"/>
            <column name="revend" type="INTEGER"/>
            <column name="revend_tstmp" type="TIMESTAMP WITHOUT TIME ZONE"/>
            
            <column name="can_edit" type="BOOLEAN"/>
            <column name="can_edit_mod" type="BOOLEAN"/>
            <column name="description" type="VARCHAR(255)"/>
            <column name="description_mod" type="BOOLEAN"/>
            <column name="is_archived" type="BOOLEAN"/>
            <column name="is_archived_mod" type="BOOLEAN"/>
            <column name="name" type="VARCHAR(255)"/>
            <column name="name_mod" type="BOOLEAN"/>
            <column name="created_date" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column name="created_date_mod" type="BOOLEAN"/>
            <column name="updated_date" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column name="updated_date_mod" type="BOOLEAN"/>
            <column name="created_by" type="BIGINT"/>
            <column name="created_by_mod" type="BOOLEAN"/>
            <column name="updated_by" type="BIGINT"/>
            <column name="updated_by_mod" type="BOOLEAN"/>
            
            <column name="queries_mod" type="BOOLEAN"/> 
            <column name="query_content_mod" type="BOOLEAN"/> 
            <column name="query_participants_mod" type="BOOLEAN"/> 
            <column name="query_logics_mod" type="BOOLEAN"/> 
            <column name="query_content_groups_mod" type="BOOLEAN"/>


        </createTable>

        <addPrimaryKey tableName="query_group_aud"
                       columnNames="id,rev"
                       constraintName="pk_query_group_aud"/>

        <addForeignKeyConstraint baseTableName="query_group_aud"
                                 baseColumnNames="rev"
                                 constraintName="fk_query_group_aud_rev"
                                 referencedTableName="_revisions_info"
                                 referencedColumnNames="id"/>
    </changeSet>

 <changeSet id="create-query-aud" author="gwen">
    <createTable tableName="query_aud">
        <column name="id" type="BIGINT"/>
        <column name="rev" type="INT"/>
        <column name="revtype" type="SMALLINT"/>
        <column name="revend" type="INT"/>
        <column name="revend_tstmp" type="TIMESTAMP"/>

        <column name="query_group_id" type="BIGINT"/>
        <column name="query_group_id_mod" type="BOOLEAN"/>
        <column name="entity" type="VARCHAR(255)"/>
        <column name="entity_mod" type="BOOLEAN"/>
        <column name="query_metric" type="VARCHAR(255)"/>
        <column name="query_metric_mod" type="BOOLEAN"/>
        <column name="comparison_operator" type="VARCHAR(255)"/>
        <column name="comparison_operator_mod" type="BOOLEAN"/>
        <column name="value" type="VARCHAR(255)"/>
        <column name="value_mod" type="BOOLEAN"/>
        <column name="time_frame" type="VARCHAR(255)"/>
        <column name="time_frame_mod" type="BOOLEAN"/>
    
        <column name="field_mod" type="BOOLEAN"/>
        <column name="operator_mod" type="BOOLEAN"/>
        <column name="query_group_mod" type="BOOLEAN"/>
    </createTable>

    <addPrimaryKey tableName="query_aud" columnNames="id,rev" constraintName="query_aud_pkey"/>

    <addForeignKeyConstraint baseColumnNames="rev" baseTableName="query_aud"
                             referencedColumnNames="id" referencedTableName="_revisions_info"
                             constraintName="fk_query_aud_rev"/>

    <addForeignKeyConstraint baseColumnNames="revend" baseTableName="query_aud"
                             referencedColumnNames="id" referencedTableName="_revisions_info"
                             constraintName="fk_query_aud_revend"/>
</changeSet>


 <changeSet id="create-query_content-aud" author="gwen">
    <createTable tableName="query_content_aud">
        <column name="id" type="BIGINT"/>
        <column name="rev" type="INT"/>
        <column name="revtype" type="SMALLINT"/>
        <column name="revend" type="INT"/>
        <column name="revend_tstmp" type="TIMESTAMP"/>
        
        <column name="heading" type="VARCHAR(255)"/>
        <column name="heading_mod" type="BOOLEAN"/>
        <column name="text_value" type="VARCHAR(255)"/>
        <column name="text_value_mod" type="BOOLEAN"/>
        <column name="image" type="BYTEA"/>
        <column name="image_mod" type="BOOLEAN"/>
        <column name="resource_id" type="BIGINT"/>
        <column name="resource_id_mod" type="BOOLEAN"/>
        <column name="image_alternative_text" type="VARCHAR(255)"/>
        <column name="image_alternative_text_mod" type="BOOLEAN"/>
        <column name="query_group_id" type="BIGINT"/>
        <column name="query_group_id_mod" type="BOOLEAN"/>
        <column name="query_content_group_id" type="BIGINT"/>
        <column name="query_content_group_id_mod" type="BOOLEAN"/>
        <column name="type" type="VARCHAR(255)"/>
        <column name="type_mod" type="BOOLEAN"/>

        <column name="value_mod" type="BOOLEAN"/>
        <column name="query_group_mod" type="BOOLEAN"/>
        <column name="query_content_group_mod" type="BOOLEAN"/>
        <column name="image_alt_text_mod" type="BOOLEAN"/>
        <column name="image_blob_mod" type="BOOLEAN"/>
        
    </createTable>

    <addPrimaryKey tableName="query_content_aud" 
                   columnNames="id,rev" 
                   constraintName="query_content_aud_pkey"/>

    <addForeignKeyConstraint baseColumnNames="rev" 
                             baseTableName="query_content_aud"
                             referencedColumnNames="id" 
                             referencedTableName="_revisions_info"
                             constraintName="fk_query_content_aud_rev"/>

    <addForeignKeyConstraint baseColumnNames="revend" 
                             baseTableName="query_content_aud"
                             referencedColumnNames="id" 
                             referencedTableName="_revisions_info"
                             constraintName="fk_query_content_aud_revend"/>
</changeSet>

<changeSet id="create-query_content_group-aud" author="gwen">
        <createTable tableName="query_content_group_aud">
            <column name="id" type="BIGINT" />
            <column name="rev" type="BIGINT" />
            <column name="revtype" type="SMALLINT"/>
            <column name="revend" type="INTEGER"/>
            <column name="revend_tstmp" type="TIMESTAMP"/>

            <column name="content_group_name" type="VARCHAR(255)"/>
            <column name="content_group_name_mod" type="BOOLEAN"/>
            <column name="query_group_id" type="BIGINT"/>
            <column name="query_group_id_mod" type="BOOLEAN"/>
            <column name="created_date" type="TIMESTAMP WITH TIME ZONE"/>
            <column name="created_date_mod" type="BOOLEAN"/>
            <column name="updated_date" type="TIMESTAMP WITH TIME ZONE"/>
            <column name="updated_date_mod" type="BOOLEAN"/>
            <column name="status" type="VARCHAR(50)"/>
            <column name="status_mod" type="BOOLEAN"/>

            <column name="query_group_mod" type="BOOLEAN"/>
        </createTable>

        <addPrimaryKey
            tableName="query_content_group_aud"
            columnNames="id, rev"
            constraintName="pk_query_content_group_aud"/>

        <addForeignKeyConstraint
            baseTableName="query_content_group_aud"
            baseColumnNames="rev"
            constraintName="fk_query_content_group_aud_revinfo"
            referencedTableName="_revisions_info"
            referencedColumnNames="id"/>
    </changeSet>

   <changeSet id="create-query_evaluation-aud" author="gwen">
        <createTable tableName="query_evaluation_aud">
            <column name="id" type="BIGINT" />
            <column name="rev" type="BIGINT" />
            <column name="revtype" type="SMALLINT"/>
            <column name="revend" type="INTEGER"/>
            <column name="revend_tstmp" type="TIMESTAMP"/>

          
            <column name="query_group_id" type="BIGINT"/>
            <column name="query_group_id_mod" type="BOOLEAN"/>
            <column name="subject_id" type="BIGINT"/>
            <column name="subject_id_mod" type="BOOLEAN"/>
            <column name="created_date" type="TIMESTAMP WITH TIME ZONE"/>
            <column name="created_date_mod" type="BOOLEAN"/>
            <column name="updated_date" type="TIMESTAMP WITH TIME ZONE"/>
            <column name="updated_date_mod" type="BOOLEAN"/>
            <column name="result" type="BOOLEAN"/>
            <column name="result_mod" type="BOOLEAN"/>
            <column name="notification_sent" type="BOOLEAN"/>
            <column name="notification_sent_mod" type="BOOLEAN"/>

            <column name="query_group_mod" type="BOOLEAN"/>
            <column name="subject_mod" type="BOOLEAN"/>
        </createTable>

        <addPrimaryKey
            tableName="query_evaluation_aud"
            columnNames="id, rev"
            constraintName="pk_query_evaluation_aud"/>

        <addForeignKeyConstraint
            baseTableName="query_evaluation_aud"
            baseColumnNames="rev"
            constraintName="fk_query_evaluation_aud_revinfo"
            referencedTableName="_revisions_info"
            referencedColumnNames="id"/>
    </changeSet>

 <changeSet id="create-query_logic-aud" author="gwen">
    <createTable tableName="query_logic_aud">
        <column name="id" type="BIGINT" />
        <column name="rev" type="BIGINT" />
        <column name="revtype" type="SMALLINT"/>
        <column name="revend" type="INTEGER"/>
        <column name="revend_tstmp" type="TIMESTAMP"/>
       
        <column name="query_group_id" type="BIGINT"/>
        <column name="query_group_id_mod" type="BOOLEAN"/>
        <column name="type" type="VARCHAR(255)"/>
        <column name="type_mod" type="BOOLEAN"/>
        <column name="logic_operator" type="VARCHAR(255)"/>
        <column name="logic_operator_mod" type="BOOLEAN"/>
        <column name="query_id" type="BIGINT"/>
        <column name="query_id_mod" type="BOOLEAN"/>
        <column name="parent_id" type="BIGINT"/>
        <column name="parent_id_mod" type="BOOLEAN"/>
        
        <column name="parent_mod" type="BOOLEAN"/>
        <column name="query_mod" type="BOOLEAN"/>
        <column name="query_group_mod" type="BOOLEAN"/>
    </createTable>

    <addPrimaryKey
        tableName="query_logic_aud"
        columnNames="id, rev"
        constraintName="pk_query_logic_aud"/>

    <addForeignKeyConstraint
        baseTableName="query_logic_aud"
        baseColumnNames="rev"
        constraintName="fk_query_logic_aud_revinfo"
        referencedTableName="_revisions_info"
        referencedColumnNames="id"/>
</changeSet>


<changeSet id="create-query-participant-aud" author="gwen">
        <createTable tableName="query_participant_aud">
            <column name="id" type="BIGINT" />
            <column name="rev" type="BIGINT" />
            <column name="revtype" type="SMALLINT"/>
            <column name="revend" type="INTEGER"/>
            <column name="revend_tstmp" type="TIMESTAMP"/>
            
            <column name="query_group_id" type="BIGINT"/>
            <column name="query_group_id_mod" type="BOOLEAN"/>
            <column name="subject_id" type="BIGINT"/>
            <column name="subject_id_mod" type="BOOLEAN"/>
            <column name="assigned_date" type="TIMESTAMP WITH TIME ZONE"/>
            <column name="assigned_date_mod" type="BOOLEAN"/>
            <column name="updated_date" type="TIMESTAMP WITH TIME ZONE"/>
            <column name="updated_date_mod" type="BOOLEAN"/>
            <column name="created_by" type="BIGINT"/>
            <column name="created_by_mod" type="BOOLEAN"/>

            <column name="subject_mod" type="BOOLEAN"/>
            <column name="query_group_mod" type="BOOLEAN"/>
        </createTable>

        <addPrimaryKey 
            tableName="query_participant_aud" 
            columnNames="id, rev"
            constraintName="pk_query_participant_aud"/>

        <addForeignKeyConstraint 
            baseTableName="query_participant_aud"
            baseColumnNames="rev"
            constraintName="fk_query_participant_aud_revinfo"
            referencedTableName="_revisions_info"
            referencedColumnNames="id"/>
    </changeSet>

<changeSet id="create-query-participant-content-aud" author="gwen">
    <createTable tableName="query_participant_content_aud">
        <column name="id" type="BIGINT" />
        <column name="rev" type="BIGINT" />
        <column name="revtype" type="SMALLINT"/>
        <column name="revend" type="INTEGER"/>
        <column name="revend_tstmp" type="TIMESTAMP"/>

        <column name="query_group_id" type="BIGINT"/>
        <column name="query_group_id_mod" type="BOOLEAN"/>
        <column name="subject_id" type="BIGINT"/>
        <column name="subject_id_mod" type="BOOLEAN"/>
        <column name="query_content_group_id" type="BIGINT"/>
        <column name="query_content_group_id_mod" type="BOOLEAN"/>
        <column name="created_date" type="TIMESTAMP WITH TIME ZONE"/>
        <column name="created_date_mod" type="BOOLEAN"/>
        <column name="is_archived" type="BOOLEAN"/>
        <column name="is_archived_mod" type="BOOLEAN"/>

        <column name="subject_mod" type="BOOLEAN"/>
        <column name="query_group_mod" type="BOOLEAN"/>
        <column name="query_content_group_mod" type="BOOLEAN"/>
    </createTable>

    <addPrimaryKey 
        tableName="query_participant_content_aud" 
        columnNames="id, rev"
        constraintName="pk_query_participant_content_aud"/>

    <addForeignKeyConstraint 
        baseTableName="query_participant_content_aud" baseColumnNames="rev"
        constraintName="fk_query_participant_content_aud_revinfo"
        referencedTableName="_revisions_info" referencedColumnNames="id"/>
</changeSet>


<changeSet id="create-modules-aud" author="gwen">
    <createTable tableName="modules_aud">
      <column name="id" type="BIGINT" />
        <column name="rev" type="BIGINT" />
        <column name="revtype" type="SMALLINT"/>
        <column name="revend" type="INTEGER"/>
        <column name="revend_tstmp" type="TIMESTAMP"/>

        <column name="name" type="VARCHAR(255)"/>
        <column name="name_mod" type="BOOLEAN"/>
        <column name="group_name" type="VARCHAR(255)"/>
        <column name="group_name_mod" type="BOOLEAN"/>
        <column name="link" type="VARCHAR(255)"/>
        <column name="link_mod" type="BOOLEAN"/>

    </createTable>

    <addPrimaryKey 
        tableName="modules_aud" 
        columnNames="id, rev" 
        constraintName="pk_modules_aud"/>

    <addForeignKeyConstraint 
        baseTableName="modules_aud" baseColumnNames="rev"
        referencedTableName="_revisions_info" referencedColumnNames="id"
        constraintName="fk_modules_aud_revinfo"/>
</changeSet>


</databaseChangeLog>
